<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Forge, meet Claude | Jonathan Crussell</title>
<meta name="keywords" content="gnome, window-manager, ai, testing, automation">
<meta name="description" content="Using Claude to start to tackle the backlog of 140 issues in the Forge gnome extension, &#34;successfully&#34; fixing 33 bugs.">
<meta name="author" content="Jonathan Crussell">
<link rel="canonical" href="/post/forge/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.cb1b966424391d58a85617e342812e23e741186aa62baaf33e320fa5b85c2b0b.css" integrity="sha256-yxuWZCQ5HVioVhfjQoEuI&#43;dBGGqmK6rzPjIPpbhcKws=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="/post/forge/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="/post/forge/">
  <meta property="og:site_name" content="Jonathan Crussell">
  <meta property="og:title" content="Forge, meet Claude">
  <meta property="og:description" content="Using Claude to start to tackle the backlog of 140 issues in the Forge gnome extension, &#34;successfully&#34; fixing 33 bugs.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2026-01-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2026-01-04T00:00:00+00:00">
    <meta property="article:tag" content="Gnome">
    <meta property="article:tag" content="Window-Manager">
    <meta property="article:tag" content="Ai">
    <meta property="article:tag" content="Testing">
    <meta property="article:tag" content="Automation">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Forge, meet Claude">
<meta name="twitter:description" content="Using Claude to start to tackle the backlog of 140 issues in the Forge gnome extension, &#34;successfully&#34; fixing 33 bugs.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Forge, meet Claude",
      "item": "/post/forge/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Forge, meet Claude",
  "name": "Forge, meet Claude",
  "description": "Using Claude to start to tackle the backlog of 140 issues in the Forge gnome extension, \"successfully\" fixing 33 bugs.",
  "keywords": [
    "gnome", "window-manager", "ai", "testing", "automation"
  ],
  "articleBody": "For years, I used Xmonad to organize my screen. I spent hours customizing it but I kept running into minor annoyances from not running a “proper” Desktop environment (e.g., daemons not starting on login because I was responsible for starting them). When I started using a laptop more regularly, these annoyances kept popping up and I decided to switch to Gnome and manually organize my screen.\nEvery so often, I would look at the options for tiling window managers in Gnome and found a reason not to try them until recently when I tried PaperWM. I liked the discrete workspaces that I had in Xmonad and found the scrollable tiles of PaperWM to be too unfamiliar. After uninstalling it but still feeling motivated, I looked at some screencasts from Forge and they looked great. I saw that Forge was looking for a maintainer but the last commit was a couple of weeks ago so I thought, maybe things are still moving along, albeit slowly.\nThe first issue that I encountered was that make would not run on my system. Having used Claude recently for a project (gamify-ccda), I figured that it would easily fix the Makefile, resulting in my first PR. After installing the extension and using it for a bit, I was hooked. There were a few bugs and differences from my Xmonad environment but this was great.\nIn the last few weeks, I have spent a lot of time playing with Claude on “greenfield” projects and I have been curious about how it would perform on an existing project. I wanted to see if I could use Claude to make a dent in the backlog of issues (140 as of today) and reduce some of the testing burden.\nStrategy The strategy that I am following is as follows:\nExport all the issues from the repo using gh in JSON format. Use Claude to review issues and create a ROADMAP. Focus Claude on bugs that do not require a lot of code changes. In parallel, on a different branch, I am having Claude write comprehensive testing for the “vanilla” code base. My goal is to have one branch that fixes as many issues as possible and another that implements a complete suite of unit tests, including the demonstration of all known bugs. The test would then be, does the “fixed” branch pass all the generated unit tests?\nProgress Over the last couple of days, I have been iterating with Claude and have made some progress. Based on Claude’s assessment (which may be wrong) we have fixed 33 issues:\nIssue Title #175 bug: preview overlay stuck when arranging windows with the mouse #224 bug: gnome 44, alacritty, wayland =\u003e crash #258 bug: Focus is lost if a window is closed even if ‘hover on focus’ is active #260 Blender does not resize properly when launched (or at any time) #266 Theme backup to “~/undefined.bak” and file permission bug on css-last-update change #268 bug: focus hint remains on workspace change #271 bug: Steam app is tilling but the size is overlaping. #288 bug: fix conflict with gnome default auto-maximize #289 bug: “Always on top” mode isn’t playing well with fullscreen windows #294 bug: some windows cannot be tiled (neovide, blackbox so far) #303 bug: tab decorator disappears randomly #309 bug: Huge black (and/or white) empty window with XWayland Video Bridge running #322 bug: ddterm blinking if Forge enabled and others bug #324 bug: crashing when moving windows #328 bug: White Screen of death #330 bug: wrong height in 2x2 #351 bug: window resizing, lagging on popups in brave #354 bug: Bug when swap windows with mouse #374 bug: mouse focus is moved position when changing workspace #383 bug: PIP not working on Firefox #411 bug: waydroid has gaps on the top and left side but no gap in right and bottom… #415 bug: an error occurred while loading this extension #416 Wayland display bug #426 bug: Google Chrome windows are always on top #448 bug: TypeError: cssRule.declarations is undefined #453 Bug: Wayland can’t distinguish windows from same application #454 Bug: forge on over on steam #461 Bug: Window can be snapped to edge in Tiling mode #469 Bug: Always on Top break #472 Evolution email client window always floats #480 the tiling feature does not work with brave browser #482 Bug: Anki doesn’t get tiled #483 Bug: Hover to Focus breaks Password Entering Dialog Boxes Conclusion So far, this seems like it might be worthwhile. I do not trust that Claude has actually fixed all the bugs “correctly” but I am running the modified version now. Hopefully the strategy of fixing bugs in one branch and building a test suite in another will be helpful for verification. I am interested to explore how Claude does on more complicated bugs. Unfortunately, I hit my subscription limit for the week and will have to continue this exploration another time.\nBonus I find cheat sheets super helpful when learning keyboard shortcuts so, following the theme of this post, I had Claude make one (PDF).\nLinks Fork with fixes Fork with unit tests Cheatsheet ",
  "wordCount" : "849",
  "inLanguage": "en",
  "datePublished": "2026-01-04T00:00:00Z",
  "dateModified": "2026-01-04T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Jonathan Crussell"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/forge/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jonathan Crussell",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Jonathan Crussell (Alt + H)">Jonathan Crussell</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/publication/" title="Publications">
                    <span>Publications</span>
                </a>
            </li>
            <li>
                <a href="/project/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Forge, meet Claude
    </h1>
    <div class="post-description">
      Using Claude to start to tackle the backlog of 140 issues in the Forge gnome extension, &#34;successfully&#34; fixing 33 bugs.
    </div>
    <div class="post-meta"><span title='2026-01-04 00:00:00 +0000 UTC'>January 4, 2026</span>&nbsp;·&nbsp;<span>4 min</span>&nbsp;·&nbsp;<span>Jonathan Crussell</span>

</div>
  </header> 
  <div class="post-content"><p>For years, I used <a href="https://xmonad.org/">Xmonad</a> to organize my screen. I spent
hours customizing it but I kept running into minor annoyances from not running
a &ldquo;proper&rdquo; Desktop environment (e.g., daemons not starting on login because I
was responsible for starting them). When I started using a laptop more
regularly, these annoyances kept popping up and I decided to switch to Gnome
and manually organize my screen.</p>
<p>Every so often, I would look at the options for tiling window managers in Gnome
and found a reason not to try them until recently when I tried
<a href="https://github.com/paperwm/PaperWM">PaperWM</a>. I liked the discrete workspaces
that I had in Xmonad and found the scrollable tiles of PaperWM to be too
unfamiliar. After uninstalling it but still feeling motivated, I looked at some
screencasts from <a href="https://github.com/forge-ext/forge">Forge</a> and they looked
great. I saw that Forge was looking for a maintainer but the last commit was a
couple of weeks ago so I thought, maybe things are still moving along, albeit
slowly.</p>
<p>The first issue that I encountered was that <code>make</code> would not run on my system.
Having used Claude recently for a project
(<a href="/project/gamify-ccda/">gamify-ccda</a>), I figured that it would easily fix the
<code>Makefile</code>, resulting in my first
<a href="https://github.com/forge-ext/forge/pull/500">PR</a>. After installing the
extension and using it for a bit, I was hooked. There were a few bugs and
differences from my Xmonad environment but this was great.</p>
<p>In the last few weeks, I have spent a lot of time playing with Claude on
&ldquo;greenfield&rdquo; projects and I have been curious about how it would perform on an
existing project. I wanted to see if I could use Claude to make a dent in the
backlog of issues (140 as of today) and reduce some of the testing burden.</p>
<h2 id="strategy">Strategy<a hidden class="anchor" aria-hidden="true" href="#strategy">#</a></h2>
<p>The strategy that I am following is as follows:</p>
<ul>
<li>Export all the issues from the repo using <code>gh</code> in JSON format.</li>
<li>Use Claude to review issues and create a ROADMAP.</li>
<li>Focus Claude on bugs that do not require a lot of code changes.</li>
</ul>
<p>In parallel, on a different branch, I am having Claude write comprehensive
testing for the &ldquo;vanilla&rdquo; code base. My goal is to have one branch that fixes
as many issues as possible and another that implements a complete suite of unit
tests, including the demonstration of all known bugs. The test would then be,
does the &ldquo;fixed&rdquo; branch pass all the generated unit tests?</p>
<h2 id="progress">Progress<a hidden class="anchor" aria-hidden="true" href="#progress">#</a></h2>
<p>Over the last couple of days, I have been iterating with Claude and have made
some progress. Based on Claude&rsquo;s assessment (which may be wrong) we have fixed
33 issues:</p>
<table>
  <thead>
      <tr>
          <th>Issue</th>
          <th>Title</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/175">#175</a></td>
          <td>bug: preview overlay stuck when arranging windows with the mouse</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/224">#224</a></td>
          <td>bug: gnome 44, alacritty, wayland =&gt; crash</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/258">#258</a></td>
          <td>bug: Focus is lost if a window is closed even if &lsquo;hover on focus&rsquo; is active</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/260">#260</a></td>
          <td>Blender does not resize properly when launched (or at any time)</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/266">#266</a></td>
          <td>Theme backup to &ldquo;~/undefined.bak&rdquo; and file permission bug on css-last-update change</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/268">#268</a></td>
          <td>bug: focus hint remains on workspace change</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/271">#271</a></td>
          <td>bug: Steam app is tilling but the size is overlaping.</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/288">#288</a></td>
          <td>bug: fix conflict with gnome default auto-maximize</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/289">#289</a></td>
          <td>bug: &ldquo;Always on top&rdquo; mode isn&rsquo;t playing well with fullscreen windows</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/294">#294</a></td>
          <td>bug: some windows cannot be tiled (neovide, blackbox so far)</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/303">#303</a></td>
          <td>bug: tab decorator disappears randomly</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/309">#309</a></td>
          <td>bug: Huge black (and/or white) empty window with XWayland Video Bridge running</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/322">#322</a></td>
          <td>bug: ddterm blinking if Forge enabled and others bug</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/324">#324</a></td>
          <td>bug: crashing when moving windows</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/328">#328</a></td>
          <td>bug: White Screen of death</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/330">#330</a></td>
          <td>bug: wrong height in 2x2</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/351">#351</a></td>
          <td>bug: window resizing, lagging on popups in brave</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/354">#354</a></td>
          <td>bug: Bug when swap windows with mouse</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/374">#374</a></td>
          <td>bug: mouse focus is moved position when changing workspace</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/383">#383</a></td>
          <td>bug: PIP not working on Firefox</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/411">#411</a></td>
          <td>bug: waydroid has gaps on the top and left side but no gap in right and bottom&hellip;</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/415">#415</a></td>
          <td>bug: an error occurred while loading this extension</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/416">#416</a></td>
          <td>Wayland display bug</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/426">#426</a></td>
          <td>bug: Google Chrome windows are always on top</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/448">#448</a></td>
          <td>bug: TypeError: cssRule.declarations is undefined</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/453">#453</a></td>
          <td>Bug: Wayland can&rsquo;t distinguish windows from same application</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/454">#454</a></td>
          <td>Bug: forge on over on steam</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/461">#461</a></td>
          <td>Bug: Window can be snapped to edge in Tiling mode</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/469">#469</a></td>
          <td>Bug: Always on Top break</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/472">#472</a></td>
          <td>Evolution email client window always floats</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/480">#480</a></td>
          <td>the tiling feature does not work with brave browser</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/482">#482</a></td>
          <td>Bug: Anki doesn&rsquo;t get tiled</td>
      </tr>
      <tr>
          <td><a href="https://github.com/forge-ext/forge/issues/483">#483</a></td>
          <td>Bug: Hover to Focus breaks Password Entering Dialog Boxes</td>
      </tr>
  </tbody>
</table>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>So far, this seems like it might be worthwhile. I do not trust that Claude has
actually fixed all the bugs &ldquo;correctly&rdquo; but I am running the modified version
now. Hopefully the strategy of fixing bugs in one branch and building a test
suite in another will be helpful for verification. I am interested to explore
how Claude does on more complicated bugs. Unfortunately, I hit my subscription
limit for the week and will have to continue this exploration another time.</p>
<h2 id="bonus">Bonus<a hidden class="anchor" aria-hidden="true" href="#bonus">#</a></h2>
<p>I find cheat sheets super helpful when learning keyboard shortcuts so,
following the theme of this post, I had Claude make
<a href="https://github.com/jcrussell/forge-cheatsheet/releases/download/v0.1.0/forge-cheatsheet.pdf">one (PDF)</a>.</p>
<h2 id="links">Links<a hidden class="anchor" aria-hidden="true" href="#links">#</a></h2>
<ul>
<li><a href="https://github.com/jcrussell/forge/tree/claude-fixes">Fork with fixes</a></li>
<li><a href="https://github.com/jcrussell/forge/tree/claude-tests">Fork with unit tests</a></li>
<li><a href="https://github.com/jcrussell/forge-cheatsheet">Cheatsheet</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/gnome/">Gnome</a></li>
      <li><a href="/tags/window-manager/">Window-Manager</a></li>
      <li><a href="/tags/ai/">Ai</a></li>
      <li><a href="/tags/testing/">Testing</a></li>
      <li><a href="/tags/automation/">Automation</a></li>
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>© 2020-2026</span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
